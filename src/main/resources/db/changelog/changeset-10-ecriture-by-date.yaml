databaseChangeLog:
  - changeSet:
      id: 10
      author: yowyob
      changes:
        - cassandra:
            cql: |
              CREATE MATERIALIZED VIEW yowyob_erp.ecriture_comptable_by_date AS
                  SELECT tenant_id, id, numero_ecriture, libelle, date_ecriture, journal_comptable_id, periode_comptable_id, 
                         montant_total, validee, date_validation, utilisateur_validation, reference_externe, notes
                  FROM yowyob_erp.ecriture_comptable
                  WHERE tenant_id IS NOT NULL AND id IS NOT NULL AND date_ecriture IS NOT NULL
                  PRIMARY KEY (tenant_id, date_ecriture, id)
                  WITH CLUSTERING ORDER BY (date_ecriture ASC, id ASC);